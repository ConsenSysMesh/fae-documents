<!doctype html>
<html><head><title>Claims made by Fae</title><meta charset="UTF-8"><link href="http://fonts.googleapis.com/css?family=Crimson+Text:400,400italic,700,700italic|Roboto:400,700,700italic,400italic" rel="stylesheet" type="text/css"><style>/*
 * Copyright 2014 Quip
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License. You may obtain
 * a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

body {
    font-size: 15px;
    color: #333;
    background: #fff;
    padding: 60px 95px;
    max-width: 900px;
    margin: 0 auto;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern";
    font-kerning: normal;
    -moz-font-feature-settings: "kern";
    -webkit-font-feature-settings: "kern";
}

/* Headings */
h1,
h2,
h3,
th {
    font-family: Roboto, sans-serif;
    font-weight: 700;
    margin: 0;
    margin-top: 1.25em;
    margin-bottom: 0.75em;
}

h1 {
    font-size: 35px;
    line-height: 42px;
}

h1:first-child {
    margin-top: 0;
}

h2 {
    font-size: 18px;
    line-height: 22px;
}

h3 {
    text-transform: uppercase;
    font-size: 13px;
    line-height: 16px;
}

/* Body text */
body,
p,
ul,
ol,
td {
    font-family: "Crimson Text", serif;
    font-size: 16px;
    line-height: 20px;
}

blockquote,
q {
    display: block;
    margin: 1em 0;
    font-style: italic;
}

blockquote a,
q a {
    text-decoration: underline;
}

blockquote {
    padding-left: 10px;
    border-left: 4px solid #a6a6a6;
}

q {
    color: #a6a6a6;
    line-height: 40px;
    font-size: 24px;
    text-align: center;
    quotes: none;
}

q a {
    color: #a6a6a6;
}

code,
pre {
    font-family: Consolas, "Liberation Mono", Menlo, "Courier Prime Web",
        Courier, monospace;
    background: #f3f3f3;
}

code {
    padding: 1px;
    margin: 0 -1px;
    border-radius: 3px;
}

pre {
    display: block;
    line-height: 20px;
    text-shadow: 0 1px white;
    padding: 5px 5px 5px 30px;
    white-space: nowrap;
    position: relative;
    margin: 1em 0;
}

pre:before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 15px;
    border-left: solid 1px #dadada;
}

/* Lists */
div[data-section-style="5"],
div[data-section-style="6"],
div[data-section-style="7"] {
    margin: 12px 0;
}

ul {
    padding: 0 0 0 40px;
}

ul li {
    margin-bottom: 0.4em;
}

/* Bulleted list */
div[data-section-style="5"] ul {
    list-style-type: disc;
}
div[data-section-style="5"] ul ul {
    list-style-type: circle;
}
div[data-section-style="5"] ul ul ul {
    list-style-type: square;
}
div[data-section-style="5"] ul ul ul ul {
    list-style-type: disc;
}
div[data-section-style="5"] ul ul ul ul ul {
    list-style-type: circle;
}
div[data-section-style="5"] ul ul ul ul ul ul {
    list-style-type: square;
}

/* Numbered list */
div[data-section-style="6"] ul {
    list-style-type: decimal;
}
div[data-section-style="6"] ul ul {
    list-style-type: lower-alpha;
}
div[data-section-style="6"] ul ul ul {
    list-style-type: lower-roman;
}
div[data-section-style="6"] ul ul ul ul {
    list-style-type: decimal;
}
div[data-section-style="6"] ul ul ul ul ul {
    list-style-type: lower-alpha;
}
div[data-section-style="6"] ul ul ul ul ul ul {
    list-style-type: lower-roman;
}

/* Checklist */
div[data-section-style="7"] ul {
    list-style-type: none;
}

div[data-section-style="7"] ul li:before {
    content: "\2610";
    position: absolute;
    display: inline;
    margin-right: 1.2em;
    margin-left: -1.2em;
}

div[data-section-style="7"] ul li.parent:before {
    content: "";
}

div[data-section-style="7"] ul li.parent {
    font-weight: bold;
}

div[data-section-style="7"] ul li.checked {
    text-decoration: line-through;
}

div[data-section-style="7"] ul li.checked:before {
    content: "\2611";
    text-decoration: none;
}

/* Tables */
div[data-section-style="8"] {
    margin: 12px 0;
}

table {
    border-spacing: 0;
    border-collapse: separate;
    border: solid 1px #bbb;
    table-layout: fixed;
    position: relative;
}

table th,
table td {
    padding: 2px 2px 0;
    min-width: 1.5em;
    word-wrap: break-word;
}

table th {
    border-bottom: 1px solid #e1e1e1;
    background: #f4f4f4;
    font-weight: bold;
    vertical-align: bottom;
    color: #3a4449;
    text-align: center;
}

table td {
    padding-top: 0;
    border-left: 1px solid #e1e1e1;
    border-top: 1px solid #e1e1e1;
    vertical-align: top;
}

table td.bold {
    font-weight: bold;
}

table td.italic {
    font-style: italic;
}

table td.underline {
    text-decoration: underline;
}

table td.strikethrough {
    text-decoration: line-through;
}

table td.underline.strikethrough {
    text-decoration: underline line-through;
}

table td:first-child {
    border-left: hidden;
}

table tr:first-child td {
    border-top: hidden;
}

/* Images */
div[data-section-style="11"] {
    margin-top: 20px;
    margin-bottom: 20px;
    margin-left: auto;
    margin-right: auto;
}

div[data-section-style="11"][data-section-float="0"] {
    clear: both;
    text-align: center;
}

div[data-section-style="11"][data-section-float="1"] {
    float: left;
    clear: left;
    margin-right: 20px;
}

div[data-section-style="11"][data-section-float="2"] {
    float: right;
    clear: right;
    margin-left: 20px;
}

div[data-section-style="11"] img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: auto;
}

hr {
    width: 70px;
    margin: 20px auto;
}

/* Apps */
div[data-section-style="19"].placeholder {
    margin: 0.8em auto;
    padding: 4px 0;
    display: block;
    color: #29b6f2;
    text-align: center;
    border: 1px solid rgba(41, 182, 242, 0.2);
    border-radius: 3px;
    background: #e9f8fe;
    font-family: Roboto, sans-serif;
}

div[data-section-style="19"].first-party-element {
    margin-bottom: 10px;
    background-repeat: no-repeat;
    background-size: contain;
}

div[data-section-style="19"].first-party-element.kanban {
    background-image: url("https://quip-cdn.com/nK0hSyhsb4jrLIL2s5Ma-g");
    height: 166px;
}

div[data-section-style="19"].first-party-element.calendar {
    background-image: url("https://quip-cdn.com/OYujqLny03RILxcLIiyERg");
    height: 244px;
}

div[data-section-style="19"].first-party-element.poll {
    background-image: url("https://quip-cdn.com/fbIiFrcKGv__4NB7CBfxoA");
    height: 116px;
}

div[data-section-style="19"].first-party-element.countdown {
    background-image: url("https://quip-cdn.com/3bPhykD2dBei9sSjCWteTQ");
    height: 96px;
}

div[data-section-style="19"].first-party-element.process_bar {
    background-image: url("https://quip-cdn.com/ybQlHnHEIIBLog5rZmYs_w");
    height: 36px;
}

div[data-section-style="19"].first-party-element.project_tracker {
    background-image: url("https://quip-cdn.com/OFQU087b4Mxzz1ZaHwtjXA");
    height: 164px;
}

div[data-section-style="19"] img {
    margin: 0.5em;
}

div[data-section-style="19"] img.masked-image {
    margin: 0;
    transform-origin: top left;
}

div[data-section-style="19"] .image-mask {
    position: relative;
    overflow: hidden;
}
</style></head><body><h1 id='ObEACAFRiRx'>Claims made by Fae</h1>

Fae makes the following claims concerning its execution of smart contracts:<br/>

<div data-section-style='6'><ul id='ObEACAtnJLL'><li id='ObEACAm6SW5' class='parent' value='1'>Transactions and contract calls are executed on demand by each individual participating computer.

<br/></li><ul><li id='ObEACA6eRQB' class=''>Demand is defined as a request, on a local machine, to display the results of a transaction; or, as a contract call whose return value is required by a previously demanded execution; or, as a contract call that precedes the execution of a previously demanded call to the same contract; or, as contract or transaction code required to execute the creation of a contract whose execution was previously demanded.

<br/></li><li id='ObEACA3qA0z' class=''>All code that is not demanded in one of the above ways remains implicit (corresponding to the behavior of Haskell code called <i>lazy evaluation</i>; see 4).

<br/></li><li id='ObEACAqC3T4' class=''>Following its execution required by a demand, the stored effects of previously implicit code are cached, so that further demands do not necessitate re-execution of the same code.

<br/></li><li id='ObEACAPHOVe' class=''>Any transaction code that exists outside a contract call remains unevaluated until either demanded by the result of that transaction, or demanded by a contract creation (this is a corollary to 1a).

<br/></li><li id='ObEACAuKLho' class=''>Transaction results are treated similarly to contract return values but are stored publicly specifically to be demanded in this way.

<br/></li></ul><li id='ObEACAkblhZ' class=''>Despite this selective execution, the Fae network maintains consensus to the same degree as a single-threaded blockchain like Ethereum, in the following sense: <i>if</i> two machines demand the results of the same transaction, <i>then</i> they will obtain the same results.

<br/></li><li id='ObEACA3GkEe' class='parent'>On-demand execution of contract calls is facilitated by the structure of contract IDs, which describe in complete detail where in the execution history the contract was first created, if ever.  Only the code at that location needs to be executed in order to find the contract creation operation, which initiates the chain of contract calls leading to the demanded transaction result.

<br/></li><ul><li id='ObEACAx20PT' class=''>Calls to a single contract are sequenced according to the order of the transactions that make those calls (see 1a).  Therefore, even if a demanded transaction relies on a call to a contract with several previous calls none of which have already been demanded, all of them are demanded in order.  Therefore every demand for a call to a contract takes the same path back to the contract's creation.

<br/></li><li id='ObEACAYasa0' class=''>Contracts are indexed in storage by the details of the structure of their contract ID, in such a way that it need not be known whether any other contract ID is valid in order to determine whether the given one is.

<br/></li></ul><li id='ObEACAYf7bt' class='parent'>Contract and transaction code is written in the Haskell language.

<br/></li><ul><li id='ObEACA7b24D' class=''>Contracts may maintain internal state of a completely general format according to Haskell's capabilities to define local variables.  (This is to be distinguished from Ethereum's storage, which is rigidly organized and unstructured binary data.)

<br/></li><li id='ObEACAZ6noK' class=''>The code of one contract or transaction may affect that of another only by creating a new contract (which can only be called by a subsequent transaction outside of its free-form code; see 5) or by returning a (possibly escrow-backed; see 5c) value to be used by a transaction (either in its free-form code or as part of the argument to one of the later contract calls; see 5, 6).

<br/></li><li id='ObEACA8GGpV' class=''>Contracts are therefore effectively pure functions, having no side-effects on other, unwitting code.

<br/></li><li id='ObEACAbn8AY' class=''>As functions within Fae, contracts, like functions in Haskell code, have definite input and output types that are enforced before execution can proceed (see also 5b).

<br/></li><li id='ObEACAND7d6' class=''>Fae provides an idiomatic Haskell API for contract and transaction code: monads (execution environment) in which Fae code may be run, and a very small set of functions to provide Fae capabilities (see 9).

<br/></li><li id='ObEACAmo5UO' class=''>Not all of the content of a transaction is Haskell code; see 5, 6, 12.

<br/></li></ul><li id='ObEACA6hrKS' class='parent'>Contracts are required to be called by a transaction before any of its Haskell code is run, in a specific format that provides security to contract authors and that allows these calls to remain implicit when not specifically demanded.

<br/></li><ul><li id='ObEACADwXv4' class=''>The requirement that calls precede code in a transaction is a necessary accommodation for on-demand execution: it allows the call to be known without executing any unrelated code, which would be required (due to Rice's theorem in theoretical computer science) if inline calls were possible.

<br/></li><li id='ObEACAa7LJR' class=''>Arguments to contract calls are provided as literal text that is parsed into the type required by the contract.  The parsing function is either a Fae default or provided by the contract author (via the Haskell <code>Read</code> typeclass).

<br/></li><li id='ObEACAeXy9L' class=''>In order to enable controlled interaction between contracts, the argument syntax allows for references to parts of the return values of previously called contracts in the same transaction.  These references are provided as “version IDs”, identifiers automatically computed by Fae that correspond uniquely to the history of the referenced value (see 7d).  This provides security to payees who wish to ensure that their payment is in the expected state, e.g. not already spent, or computationally dangerous (see 5d, 6c).

<br/></li><li id='ObEACAHwatx' class=''>The literal argument syntax ensures the safety of contracts called by a transaction: no contract call is preceded by code not provided by the contract author, and therefore, the author is in principle completely responsible for the contract's correct behavior (including errors, if necessary).  The untrusted code that is thereby avoided includes, potentially, expensive or even nonterminating computations that would otherwise appear in the contract's execution history.  (See 9 for further discussion of computational costs.)

<br/></li><li id='ObEACArQbKt' class=''>The return values of all the called “input contracts” are collected into the argument type of the transaction code itself via an automatic mechanism.

<br/></li></ul><li id='ObEACAw9lBh' class='parent'>Transactions may include any number of cryptographic signatures, each assigned to a named “role” that can be referenced from within code in that transaction or the contracts it calls.

<br/></li><ul><li id='ObEACAA1JLB' class=''>The exact identities of the signatories is established by the association of their public keys with each role; after they sign, this is replaced with the cryptographic signature.

<br/></li><li id='ObEACAt5C2x' class=''>Access to the public keys of the various roles is enabled by the <code>signer</code> and related functions of the Fae API (see 9e).  Contracts can link the execution of portions of their code to conditions placed on these keys, providing access control by ensuring that particular authorized parties are signatory to the transaction.

<br/></li><li id='ObEACAVMkTQ' class=''>This access control, in combination with the versioning mechanism (see 5c), allows the “owners” of a contract to ensure its safe execution.  The contract argument may contain one kind of opaque quantity, an escrow value (see 7) that requires scrutiny from outside Fae before it can be deemed acceptable to the contract.  By linking the execution of the contract's basic functionality to the approval of those owners, as indicated by the presence of one or more of their signatures, the owners can ensure that the contract does not receive “bad” payments (however, some “bad” behaviors can be policed by escrows; see 7a).

<br/></li><li id='ObEACArBH4R' class=''>Similarly, the execution of a Faeth contract (see 13) can be linked to certain signatures.

<br/></li></ul><li id='ObEACACF8ap' class='parent'>Fae provides the concept of a managed value called an <i>escrow</i>, which functionally is a contract that is owned by a transaction or other contract or escrow, and therefore cannot be called from the contract call portion of a transaction.

<br/></li><ul><li id='ObEACAL02zN' class=''>By maintaining the ongoing state of escrows, Fae allows them to represent values with distinct identities (rather than pure byte patterns, which lack economic value because they are cheaply duplicated or forged).

<br/></li><li id='ObEACAMI85v' class=''>The escrow's argument and return value types are specified by the author of the code that defines the escrow, who can also define private operations (see 12c) that control its usage; e.g. splitting a currency value, adding ownership, etc.

<br/></li><li id='ObEACAjdwww' class=''>Escrow ownership is transferred when escrows are returned from a contract call.  The return value may be <i>escrow-backed</i>: a composite containing many escrows; Fae automatically scans it to extract the escrows that must be transferred.

<br/></li><li id='ObEACAsVvDh' class=''>Each escrow tracks a <i>version</i> that is updated to reflect each update of its state, and escrow-backed values are consequently versioned by combining details of their structure and the versions of the escrows they contain.

<br/></li><li id='ObEACA0PdZC' class=''>Escrows are identified by an <i>escrow ID</i>, a type that reflects the argument and return values for the purpose of allowing contract authors to constrain the types of escrows they expect, and for defining operations specific to escrows of a certain type.

<br/></li></ul><li id='ObEACArZTDb' class='parent'>The Fae API consists of the following six functions and two monads:

<br/></li><ul><li id='ObEACAHVGYN' class=''>The <code>FaeTX</code> and <code>Fae</code> monads, each one accepting two type variables denoting the argument and return value types of the transaction or contract, respectively.  In addition, there are typeclasses <code>MonadTX</code> and <code>MonadContract</code> that allow the Fae API to be used in derived monads.

<br/></li><li id='ObEACAv9Mgj' class=''>The functions <code>release</code> and <code>spend</code>, present only in <code>Fae</code> and <code>MonadContract</code>, that respectively denote the conclusion of the present contract call (and the passing of a return value) and the conclusion of the contract's operation altogether (also passing a return value), after the latter of which the contract is deleted.

<br/></li><li id='ObEACAvCHbb' class=''>The functions <code>newEscrow</code> and <code>useEscrow</code>, which respectively create and call an escrow.

<br/></li><li id='ObEACAIJPEk' class=''>The function <code>newContract</code>, which creates a new contract.  There is no corresponding <code>useContract</code>, as contracts can only be called before transaction code.<code> </code>

<br/></li><li id='ObEACAH6E9p' class=''>The function <code>signer</code>, which looks up a public key by its named role.

<br/></li></ul><li id='ObEACARQVRe' class='parent'>Fae places no limits on computational resource usage by the execution of demanded code.

<br/></li><ul><li id='ObEACA3QuTs' class=''>This is enabled by on-demand execution, which allows uninterested parties to avoid executing possibly expensive code over which they have no control.

<br/></li><li id='ObEACAx0cyS' class=''>Conversely, interested parties (transaction authors or signatories, in the case of access control, as in 6c) are free to test a prospective transaction in a controlled “sandbox” environment that has access to the Fae history and imposes constraints on resource usage.  The transaction need only be submitted if these parties are satisfied that it is acceptably efficient (in processor and memory usage).

<br/></li></ul><li id='ObEACAZOXtb' class='parent'>Fae does not include a fully specified, special-purpose assembly language with priced opcodes (as in Ethereum), because (by 8) there is no need to track the cost of its operations.

<br/></li><ul><li id='ObEACA2kJBz' class=''>This freedom allows the use of Haskell in contract and transaction code (see 4).

<br/></li><li id='ObEACAXuadb' class=''>As a result, there is no concept of “gas”, the payment required to run a transaction, as in Ethereum.

<br/></li></ul><li id='ObEACAySmzt' class='parent'>Fae does not include an integrated currency.

<br/></li><ul><li id='ObEACAJhUY9' class=''>A smart contract system (such as Ethereum) only requires an integrated currency to enforce execution cost limits (via gas, as in 10b) or as its basic functionality (as in Bitcoin, which does nothing but exchange a currency).  

<br/></li><li id='ObEACAbXepd' class=''>The appropriate use of escrows can replace and extend such a currency without biasing the economy towards one that is preferred for reasons outside market function.

<br/></li></ul><li id='ObEACAYWBmv' class='parent'>A Fae transaction message may be accompanied by separate source code modules, in the usual format for Haskell, which are accessible to all subsequent transactions.

<br/></li><ul><li id='ObEACABkuwA' class=''>Modules are placed in a path including the transaction ID, to prevent shadowing of like-named modules.

<br/></li><li id='ObEACAiGm3I' class=''>The textual contents of the modules is included in the transaction ID, to safeguard them from forgery.

<br/></li><li id='ObEACAKIXFq' class=''>These modules can, like all Haskell modules, selectively export the types and functions they define, allowing the authors to define types (particularly escrow types) with a safe public API.

<br/></li></ul><li id='ObEACABhlBd' class='parent'>Fae provides an extension called Faeth that allows cryptographically guaranteed interactions between Fae and Ethereum.

<br/></li><ul><li id='ObEACA6WYyO' class=''>Fae transactions are embedded in Ethereum transactions and thereby benefit from the Ethereum consensus mechanism in being ordered.

<br/></li><li id='ObEACA5uyjZ' class=''>The Fae sub-transaction may impose conditions on the Ethereum transaction.

<br/></li></ul></ul></div></body></html>